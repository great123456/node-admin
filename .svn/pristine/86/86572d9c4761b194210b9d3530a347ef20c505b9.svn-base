/*! emomoBms 2017-02-10 */
function onError(a){if("listen"!==a.syscall)throw a;var b="string"==typeof result.port?"Pipe "+result.port:"Port "+result.port;switch(a.code){case"EACCES":console.error(b+"无权限启动"),process.exit(1);break;case"EADDRINUSE":console.error("启动失败,"+b+" 已经被使用..."),process.exit(1);break;default:throw a}}function onListening(){var a=server.address();"string"==typeof a?"pipe "+a:"port "+a.port;console.log("["+config.initBase.base.SERVER_NAME+" 启动成功,端口号:"+a.port+"]")}var express=require("express"),app=express(),path=require("path"),cookieParser=require("cookie-parser"),bodyParser=require("body-parser");app.set("views",path.join(__dirname,"views")),app.set("view engine","ejs"),app.use(bodyParser.json()),app.use(bodyParser.urlencoded({extended:!1})),app.use(cookieParser()),app.use(express.static(path.join(__dirname,"public")));var config=require("./core/config"),result=config.intiFunc(app),http=require("http"),server=http.createServer(app);server.listen(result.port),server.on("error",onError),server.on("listening",onListening);