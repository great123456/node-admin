/*! emomoBms 2017-02-10 */
var express=require("express"),router=express.Router(),fs=require("fs"),func=require("../core/func"),logger=require("../core/util/logger"),rest=require("../core/restUrl"),utils=require("../core/util/utils"),http=require("../core/util/http"),httpClient=require("../core/util/httpClient").DHttpUtil,sd=require("silly-datetime"),restFulPotion={host:rest.urls["emomo-yunkong"].host,port:rest.urls["emomo-yunkong"].port,postType:"json"},restFulConf=rest.urls["emomo-yunkong"],PAGE_SIZE=10;router.get("/page",function(a,b,c){restFulPotion.path=restFulConf.findWxUserPage,params=a.query,searchKey=utils.filterParams(params,["nickname"]),currentPage=""==params.currentPage?1:params.currentPage,restFulPotion.body=JSON.stringify({currentPage:currentPage,pageSize:PAGE_SIZE,keywords:searchKey}),http.doPost(restFulPotion,function(a,c){void 0!=c&&200==a?(c.PRO_MENU={menu:"wxUser",subMenu:"wxUserPage"},b.render("wxUserPage",c)):b.render("order")})}),router.get("/evaluatePage",function(a,b,c){restFulPotion.path=restFulConf.findWxUserEvaluatePage,params=a.query,searchKey=utils.filterParams(params,["deviceSn","deviceName","memberPhone","feebackStatus"]),currentPage=""==params.currentPage?1:params.currentPage,restFulPotion.body=JSON.stringify({currentPage:currentPage,pageSize:PAGE_SIZE,keywords:searchKey}),http.doPost(restFulPotion,function(a,c){void 0!=c&&200==a?(c.PRO_MENU={menu:"wxUser",subMenu:"evaluatePage"},console.log(c),b.render("wxUserEvaluatePage",c)):b.render("order")})}),module.exports=router;