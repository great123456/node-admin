/*! emomoBms 2017-02-10 */
function checkAndCreateDir(a){var b=require("fs");b.existsSync(a)||b.mkdirSync(a)}function isAbsoluteDir(a){if(null==a)return!1;var b=a.length,c="win32"===process.platform;return c?!(b<=1)&&":"==a[1]:!(b<=0)&&"/"==a[0]}var log4js=require("log4js");exports.loggerInit=function(a){var b=require("path");if(a.appenders)for(var c=a.customBaseDir,d=a.customDefaultAtt,e=0,f=a.appenders.length;e<f;e++){var g=a.appenders[e];if("console"!=g.type){if(null!=d)for(var h in d)null==g[h]&&(g[h]=d[h]);null!=c&&(null==g.filename?g.filename=c:g.filename=c+g.filename);var i=g.filename;if(null!=i){var j=g.pattern;null!=j&&(i+=j);var k=g.category;if(!isAbsoluteDir(i))throw new Error("配置节"+k+"的路径不是绝对路径:"+i);var l=b.dirname(i);checkAndCreateDir(l)}}}log4js.configure(a)};var consoleLog=log4js.getLogger("console");exports.logger=consoleLog,exports.trace=function(a){var b=log4js.getLogger("logTrace");null==a&&(a=""),b.trace(a),consoleLog.trace(a)},exports.fatal=function(a){var b=log4js.getLogger("logFatal");null==a&&(a=""),b.fatal(a),consoleLog.fatal(a)},exports.debug=function(a){var b=log4js.getLogger("logDebug");null==a&&(a=""),b.debug(a),consoleLog.debug(a)},exports.info=function(a){var b=log4js.getLogger("logInfo");null==a&&(a=""),b.info(a),consoleLog.info(a)},exports.warn=function(a){var b=log4js.getLogger("logWarn");null==a&&(a=""),b.warn(a),consoleLog.warn(a)},exports.error=function(a,b){var c=log4js.getLogger("logErr");null==a&&(a=""),null!=b&&(a+="\r\n"+b),c.error(a),consoleLog.error(a)},exports.use=function(a){var b=log4js.getLogger("logInfo");a.use(log4js.connectLogger(b,{level:"debug",format:":method :url"}))};