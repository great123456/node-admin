/*! emomoBms 2017-02-10 */
ace.widget_boxes=function(a){a(document).on("hide.bs.collapse show.bs.collapse",function(b){var c=b.target.getAttribute("id"),d=a('a[href*="#'+c+'"]');0==d.length&&(d=a('a[data-target*="#'+c+'"]')),0!=d.length&&d.find(ace.vars[".icon"]).each(function(){var c,d=a(this),e=null,f=null;if((e=d.attr("data-icon-show"))?f=d.attr("data-icon-hide"):(c=d.attr("class").match(/fa\-(.*)\-(up|down)/))&&(e="fa-"+c[1]+"-down",f="fa-"+c[1]+"-up"),e)return"show"==b.type?d.removeClass(e).addClass(f):d.removeClass(f).addClass(e),!1})});var b=function(b,c){this.$box=a(b);this.reload=function(){var a=this.$box,b=!1;"static"==a.css("position")&&(b=!0,a.addClass("position-relative")),a.append('<div class="widget-box-overlay"><i class="'+ace.vars.icon+'loading-icon fa fa-spinner fa-spin fa-2x white"></i></div>'),a.one("reloaded.ace.widget",function(){a.find(".widget-box-overlay").remove(),b&&a.removeClass("position-relative")})},this.close=function(){var a=this.$box,b=300;a.fadeOut(b,function(){a.trigger("closed.ace.widget"),a.remove()})},this.toggle=function(a,b){var c=this.$box,d=c.find(".widget-body"),e=null,f="undefined"!=typeof a?a:c.hasClass("collapsed")?"show":"hide",g="show"==f?"shown":"hidden";if("undefined"==typeof b&&(b=c.find("> .widget-header a[data-action=collapse]").eq(0),0==b.length&&(b=null)),b){e=b.find(ace.vars[".icon"]).eq(0);var h,i=null,j=null;(i=e.attr("data-icon-show"))?j=e.attr("data-icon-hide"):(h=e.attr("class").match(/fa\-(.*)\-(up|down)/))&&(i="fa-"+h[1]+"-down",j="fa-"+h[1]+"-up")}var k=250,l=200;"show"==f?(e&&e.removeClass(i).addClass(j),d.hide(),c.removeClass("collapsed"),d.slideDown(k,function(){c.trigger(g+".ace.widget")})):(e&&e.removeClass(j).addClass(i),d.slideUp(l,function(){c.addClass("collapsed"),c.trigger(g+".ace.widget")}))},this.hide=function(){this.toggle("hide")},this.show=function(){this.toggle("show")},this.fullscreen=function(){var a=this.$box.find("> .widget-header a[data-action=fullscreen]").find(ace.vars[".icon"]).eq(0),b=null,c=null;(b=a.attr("data-icon1"))?c=a.attr("data-icon2"):(b="fa-expand",c="fa-compress"),this.$box.hasClass("fullscreen")?(a.addClass(b).removeClass(c),this.$box.removeClass("fullscreen")):(a.removeClass(b).addClass(c),this.$box.addClass("fullscreen")),this.$box.trigger("fullscreened.ace.widget")}};a.fn.widget_box=function(c,d){var e,f=this.each(function(){var f=a(this),g=f.data("widget_box"),h="object"==typeof c&&c;g||f.data("widget_box",g=new b(this,h)),"string"==typeof c&&(e=g[c](d))});return void 0===e?f:e},a(document).on("click.ace.widget",".widget-header a[data-action]",function(c){c.preventDefault();var d=a(this),e=d.closest(".widget-box");if(0!=e.length&&!e.hasClass("ui-sortable-helper")){var f=e.data("widget_box");f||e.data("widget_box",f=new b(e.get(0)));var g=d.data("action");if("collapse"==g){var h,i=e.hasClass("collapsed")?"show":"hide";if(e.trigger(h=a.Event(i+".ace.widget")),h.isDefaultPrevented())return;f.toggle(i,d)}else if("close"==g){var h;if(e.trigger(h=a.Event("close.ace.widget")),h.isDefaultPrevented())return;f.close()}else if("reload"==g){d.blur();var h;if(e.trigger(h=a.Event("reload.ace.widget")),h.isDefaultPrevented())return;f.reload()}else if("fullscreen"==g){var h;if(e.trigger(h=a.Event("fullscreen.ace.widget")),h.isDefaultPrevented())return;f.fullscreen()}else"settings"==g&&e.trigger("setting.ace.widget")}})};