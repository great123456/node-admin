/*! emomoBms 2017-02-10 */
!function(a,b){var c=function(b,c){function d(a){a.preventDefault(),a.stopPropagation();var b=v.offset(),c=b[j],d=p?a.pageY:a.pageX;d>c+B?(B=d-c-A+D,B>C&&(B=C)):(B=d-c-D,B<0&&(B=0)),h.update_scroll()}function e(b){b.preventDefault(),b.stopPropagation(),N=M=p?b.pageY:b.pageX,I=!0,a("html").off("mousemove.ace_scroll").on("mousemove.ace_scroll",f),a(J).off("mouseup.ace_scroll").on("mouseup.ace_scroll",g),v.addClass("active"),K&&h.$element.trigger("drag.start")}function f(a){a.preventDefault(),a.stopPropagation(),N=p?a.pageY:a.pageX,N-M+B>C?N=M+C-B:N-M+B<0&&(N=M-B),B+=N-M,M=N,B<0?B=0:B>C&&(B=C),h.update_scroll()}function g(b){b.preventDefault(),b.stopPropagation(),I=!1,a("html").off(".ace_scroll"),a(J).off(".ace_scroll"),v.removeClass("active"),K&&h.$element.trigger("drag.end")}var h=this,i=a.extend({},a.fn.ace_scroll.defaults,c);this.size=0,this.$element=a(b),this.element=b;var j,k,l,m,n,o,p=!0,q=!1,r=!1,s=!1,t=null,u=null,v=null,w=null,x=null,y=null,z=null,A=0,B=0,C=0,D=0,E=!0,F=!1,G=1,H=!1,I=!1,J="onmouseup"in window?window:"html",K=i.dragEvent||!1,L=c.scrollEvent||!1;this.create=function(b){if(!s){if(b&&(i=a.extend({},a.fn.ace_scroll.defaults,b)),this.size=parseInt(this.$element.attr("data-size"))||i.size||200,p=!i.horizontal,j=p?"top":"left",k=p?"height":"width",l=p?"maxHeight":"maxWidth",m=p?"clientHeight":"clientWidth",n=p?"scrollTop":"scrollLeft",o=p?"scrollHeight":"scrollWidth",this.$element.addClass("ace-scroll "+((p?"":" scroll-hz")+(i.styleClass?" "+i.styleClass:""))),"static"==this.$element.css("position")?(H=this.element.style.position,this.element.style.position="relative"):H=!1,this.$element.wrapInner('<div class="scroll-content" />'),this.$element.prepend('<div class="scroll-track"><div class="scroll-bar"></div></div>'),t=this.$element.find(".scroll-content").eq(0),p||t.wrapInner("<div />"),u=t.get(0),v=this.$element.find(".scroll-track").eq(0),w=v.find(".scroll-bar").eq(0),x=v.get(0),y=w.get(0),z=y.style,v.hide(),v.on("mousedown",d),w.on("mousedown",e),t.on("scroll",function(){E&&(B=parseInt(Math.round(this[n]*G)),z[j]=B+"px"),E=!1,L&&this.$element.trigger("scroll",[u])}),i.mouseWheel){var c=i.mouseWheelLock,f=i.lockAnyway;this.$element.on("mousewheel.ace_scroll DOMMouseScroll.ace_scroll",function(b){if(!q){if(!r)return!f;I&&(I=!1,a("html").off(".ace_scroll"),a(J).off(".ace_scroll"),K&&h.$element.trigger("drag.end"));var d=b.originalEvent.detail<0||b.originalEvent.wheelDelta>0?1:-1,e=!1,g=u[m],i=u[n];c||(e=d==-1?u[o]<=i+g:0==i),h.move_bar(!0);var j=parseInt(Math.round(Math.min(Math.max(g/8,54)),h.size))+1;return u[n]=i-d*j,e&&!f}})}var g=ace.vars.touch&&"ace_drag"in a.event.special&&i.touchDrag;if(g){var A="",C=g?"ace_drag":"swipe";this.$element.on(C+".ace_scroll",function(a){if(q)return void(a.retval.cancel=!0);if(!r)return void(a.retval.cancel=f);if(A=a.direction,p&&("up"==A||"down"==A)||!p&&("left"==A||"right"==A)){var b=p?a.dy:a.dx;0!=b&&(Math.abs(b)>20&&g&&(b*=2),h.move_bar(!0),u[n]=u[n]+b)}})}i.hoverReset&&this.$element.on("mouseenter.ace_scroll touchstart.ace_scroll",function(){h.reset()}),p||t.children(0).css(k,this.size),t.css(l,this.size),q=!1,s=!0}},this.is_active=function(){return r},this.is_enabled=function(){return!q},this.move_bar=function(a){E=a},this.reset=function(){if(!q){s||this.create();var a=p?u[o]:this.size;if(p&&0==a||!p&&0==this.element.scrollWidth)return void this.$element.removeClass("scroll-active");var b=p?this.size:u.clientWidth;p||t.children(0).css(k,this.size),t.css(l,this.size),a>b?(r=!0,v.css(k,b).show(),G=parseFloat((b/a).toFixed(5)),A=parseInt(Math.round(b*G)),D=parseInt(Math.round(A/2)),C=b-A,B=parseInt(Math.round(u[n]*G)),z[k]=A+"px",z[j]=B+"px",this.$element.addClass("scroll-active"),F||(i.reset&&(u[n]=0,z[j]=0),F=!0)):(r=!1,v.hide(),this.$element.removeClass("scroll-active"),t.css(l,""))}},this.disable=function(){return u[n]=0,z[j]=0,q=!0,r=!1,v.hide(),this.$element.removeClass("scroll-active"),t.css(l,""),this},this.enable=function(){return q=!1,this.reset(),this},this.destroy=function(){return r=!1,q=!1,s=!1,this.$element.removeClass("ace-scroll scroll-hz"+(i.extraClass?" "+i.extraClass:"")),this.$element.off(".ace_scroll"),p||t.find("> div").children().unwrap(),t.children().unwrap(),t.remove(),v.remove(),H!==!1&&(this.element.style.position=H),this},this.modify=function(b){return b&&(i=a.extend({},a.fn.ace_scroll.defaults,b)),this.destroy(),this.create(),this.reset(),this},this.update=function(a){return this.size=a.size,this},this.update_scroll=function(){E=!1,z[j]=B+"px",u[n]=parseInt(Math.round(B/G))};var M=-1,N=-1;return this.create(),this.reset(),this};a.fn.ace_scroll=function(d,e){var f,g=this.each(function(){var b=a(this),g=b.data("ace_scroll"),h="object"==typeof d&&d;g||b.data("ace_scroll",g=new c(this,h)),"string"==typeof d&&(f=g[d](e))});return f===b?g:f},a.fn.ace_scroll.defaults={size:200,horizontal:!1,mouseWheel:!0,mouseWheelLock:!1,lockAnyway:!1,styleClass:!1,hoverReset:!0,reset:!1,dragEvent:!1,touchDrag:!0,touchSwipe:!1,scrollEvent:!1}}(window.jQuery);